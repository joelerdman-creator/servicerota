{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/data.ts"],"sourcesContent":["\n\n'use client';\n\nimport type { Event, Role, Volunteer, RoleStatus, UniversalRole, ServiceTemplate, TemplateRole, VolunteerAvailability, VolunteerPreferences, Church, Family } from '@/types';\nimport { useState, useCallback, useMemo } from 'react';\nimport { startOfToday, addDays, subDays, isSameDay } from 'date-fns';\n\nconst MOCK_CHURCH_ID = 'church_123';\nconst MOCK_VOLUNTEER_ID = 'user_volunteer_1';\nconst MOCK_FAMILY_ID = 'family_1';\n\nconst today = startOfToday();\n\nconst initialChurch: Church = {\n    id: MOCK_CHURCH_ID,\n    name: \"St. Francis' Church\",\n    address: \"123 Gospel Lane, Anytown, USA 12345\",\n    phone: \"(555) 123-4567\",\n    adminName: \"John Smith\",\n    adminEmail: \"admin@stfrancis.org\",\n    publishedMonths: [`${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}`],\n}\n\nconst initialFamilies: Family[] = [\n    {\n        id: MOCK_FAMILY_ID,\n        members: [\n            { id: 'user_volunteer_1', name: 'Alice Johnson', isPrimary: true },\n            { id: 'user_volunteer_5', name: 'Steve Johnson', isPrimary: false },\n        ]\n    }\n]\n\nconst initialVolunteers: Volunteer[] = [\n  { \n    id: 'user_volunteer_1', \n    name: 'Alice Johnson', \n    email: 'alice@example.com', \n    phone: '555-0101',\n    familyId: MOCK_FAMILY_ID,\n    preferences: {\n      preferredRoleIds: ['urole_1', 'urole_5'],\n      servingFrequency: 'bi-weekly',\n      familyServingPreference: 'possible',\n      familyManagementEnabled: true,\n    }\n  },\n  { \n    id: 'user_volunteer_2', \n    name: 'Bob Williams', \n    email: 'bob@example.com', \n    phone: '555-0102',\n    preferences: {\n      preferredRoleIds: ['urole_2', 'urole_3'],\n      servingFrequency: 'monthly',\n      familyServingPreference: 'any',\n      familyManagementEnabled: false,\n    }\n  },\n  { \n    id: 'user_volunteer_3', \n    name: 'Charlie Brown', \n    email: 'charlie@example.com', \n    phone: '555-0103',\n     preferences: {\n      preferredRoleIds: ['urole_3', 'urole_6', 'urole_7'],\n      servingFrequency: 'weekly',\n      familyServingPreference: 'any',\n      familyManagementEnabled: false,\n    }\n  },\n  { \n    id: 'user_volunteer_4', \n    name: 'Diana Miller', \n    email: 'diana@example.com', \n    phone: '555-0104',\n     preferences: {\n      preferredRoleIds: [],\n      servingFrequency: 'as-needed',\n      familyServingPreference: 'any',\n      familyManagementEnabled: false,\n    }\n  },\n  { \n    id: 'user_volunteer_5', \n    name: 'Steve Johnson', \n    email: 'steve@example.com', \n    phone: '555-0105',\n    familyId: MOCK_FAMILY_ID,\n    preferences: {\n      preferredRoleIds: ['urole_2', 'urole_7'],\n      servingFrequency: 'bi-weekly',\n      familyServingPreference: 'possible',\n      familyManagementEnabled: true,\n    }\n  },\n];\n\nconst initialUniversalRoles: UniversalRole[] = [\n  { id: 'urole_1', name: 'Lector', description: 'Reads the scripture lessons for the day.' },\n  { id: 'urole_2', name: 'Acolyte', description: 'Assists the clergy during the service.' },\n  { id: 'urole_3', name: 'Usher', description: 'Greets people and helps them find a seat.' },\n  { id: 'urole_4', name: 'Cantor', description: 'Leads the congregation in singing.' },\n  { id: 'urole_5', name: 'Greeter', description: 'Welcomes people at the door with a smile.' },\n  { id: 'urole_6', name: 'Cook', description: 'Prepares food for community events.' },\n  { id: 'urole_7', name: 'Server', description: 'Serves food and beverages at events.' },\n];\n\nconst initialServiceTemplates: ServiceTemplate[] = [\n    { \n        id: 'template_1', \n        name: 'Standard Sunday Service', \n        roles: [\n            { instanceId: 't1_r1', roleId: 'urole_1', name: 'Lector' },\n            { instanceId: 't1_r2', roleId: 'urole_2', name: 'Acolyte' },\n            { instanceId: 't1_r3', roleId: 'urole_3', name: 'Usher' },\n            { instanceId: 't1_r4', roleId: 'urole_3', name: 'Usher' },\n            { instanceId: 't1_r5', roleId: 'urole_5', name: 'Greeter' },\n        ]\n    },\n    { \n        id: 'template_2', \n        name: 'Pancake Breakfast', \n        roles: [\n            { instanceId: 't2_r1', roleId: 'urole_6', name: 'Cook' },\n            { instanceId: 't2_r2', roleId: 'urole_6', name: 'Cook' },\n            { instanceId: 't2_r3', roleId: 'urole_7', name: 'Server' },\n            { instanceId: 't2_r4', roleId: 'urole_5', name: 'Greeter' },\n        ]\n    }\n];\n\nconst initialAvailability: VolunteerAvailability[] = [\n    {\n        volunteerId: 'user_volunteer_1',\n        unavailableDates: [addDays(today, 12), addDays(today, 13)]\n    },\n    {\n        volunteerId: 'user_volunteer_5',\n        unavailableDates: [addDays(today, 12), addDays(today, 13)]\n    }\n];\n\n\nconst initialEvents: Event[] = [\n  {\n    id: 'event_1',\n    churchId: MOCK_CHURCH_ID,\n    eventName: 'Sunday Morning Eucharist',\n    eventDate: addDays(today, 3),\n    notes: 'Main service. Please arrive 30 minutes early.',\n    roles: [\n      { id: 'role_1_1', roleName: 'Lector', assignedVolunteerId: 'user_volunteer_1', assignedVolunteerName: 'Alice Johnson', status: 'Pending' },\n      { id: 'role_1_2', roleName: 'Acolyte', assignedVolunteerId: 'user_volunteer_2', assignedVolunteerName: 'Bob Williams', status: 'Confirmed' },\n      { id: 'role_1_3', roleName: 'Usher', assignedVolunteerId: null, assignedVolunteerName: null, status: 'Pending' },\n    ],\n  },\n  {\n    id: 'event_2',\n    churchId: MOCK_CHURCH_ID,\n    eventName: 'Wednesday Evening Prayer',\n    eventDate: addDays(today, 6),\n    roles: [\n      { id: 'role_2_1', roleName: 'Cantor', assignedVolunteerId: 'user_volunteer_1', assignedVolunteerName: 'Alice Johnson', status: 'Confirmed' },\n    ],\n  },\n  {\n    id: 'event_3',\n    churchId: MOCK_CHURCH_ID,\n    eventName: 'Community Pancake Breakfast',\n    eventDate: addDays(today, 10),\n    notes: 'Annual fundraiser. All hands on deck!',\n    roles: [\n      { id: 'role_3_1', roleName: 'Cook', assignedVolunteerId: 'user_volunteer_3', assignedVolunteerName: 'Charlie Brown', status: 'Declined' },\n      { id: 'role_3_2', roleName: 'Server', assignedVolunteerId: 'user_volunteer_4', assignedVolunteerName: 'Diana Miller', status: 'Pending' },\n      { id: 'role_3_3', roleName: 'Greeter', assignedVolunteerId: 'user_volunteer_1', assignedVolunteerName: 'Alice Johnson', status: 'Pending' },\n    ],\n  },\n    {\n    id: 'event_4',\n    churchId: MOCK_CHURCH_ID,\n    eventName: 'Last Sunday Service',\n    eventDate: subDays(today, 4),\n    notes: 'Service from last week',\n    roles: [\n      { id: 'role_4_1', roleName: 'Lector', assignedVolunteerId: 'user_volunteer_1', assignedVolunteerName: 'Alice Johnson', status: 'Confirmed' },\n    ],\n  },\n];\n\n// Using a custom hook to manage state and simulate backend\nexport function useMockDatabase() {\n  const [events, setEvents] = useState<Event[]>(initialEvents);\n  const [volunteers, setVolunteers] = useState<Volunteer[]>(initialVolunteers);\n  const [universalRoles, setUniversalRoles] = useState<UniversalRole[]>(initialUniversalRoles);\n  const [serviceTemplates, setServiceTemplates] = useState<ServiceTemplate[]>(initialServiceTemplates);\n  const [availability, setAvailability] = useState<VolunteerAvailability[]>(initialAvailability);\n  const [church, setChurch] = useState<Church>(initialChurch);\n  const [families, setFamilies] = useState<Family[]>(initialFamilies);\n\n\n  const getEvents = useCallback(async (churchId: string): Promise<Event[]> => {\n    return events.filter(event => event.churchId === churchId);\n  }, [events]);\n\n  const createEvent = useCallback(async (newEventData: Omit<Event, 'id' | 'roles' | 'churchId'>, templateId?: string): Promise<Event> => {\n    let newRoles: Role[] = [];\n    if (templateId) {\n        const template = serviceTemplates.find(t => t.id === templateId);\n        if (template) {\n            newRoles = template.roles.map(templateRole => ({\n                id: `role_${Date.now()}_${templateRole.instanceId}`,\n                roleName: templateRole.name,\n                assignedVolunteerId: null,\n                assignedVolunteerName: null,\n                status: 'Pending',\n            }));\n        }\n    }\n\n    const newEvent: Event = {\n      ...newEventData,\n      id: `event_${Date.now()}`,\n      churchId: MOCK_CHURCH_ID,\n      roles: newRoles,\n    };\n    setEvents(prev => [...prev, newEvent]);\n    return newEvent;\n  }, [serviceTemplates]);\n\n  const updateEvent = useCallback(async (eventId: string, updatedData: Partial<Event>): Promise<void> => {\n    setEvents(prev => prev.map(event => event.id === eventId ? { ...event, ...updatedData } : event));\n  }, []);\n\n  const addRoleToEvent = useCallback(async (eventId: string, roleData: Omit<Role, 'id'>): Promise<Role> => {\n    const newRole: Role = {\n      ...roleData,\n      id: `role_${Date.now()}`,\n    };\n    setEvents(prev => prev.map(event => {\n      if (event.id === eventId) {\n        return { ...event, roles: [...event.roles, newRole] };\n      }\n      return event;\n    }));\n    return newRole;\n  }, []);\n\n  const updateRoleInEvent = useCallback(async (eventId: string, roleId: string, updatedRoleData: Partial<Role>): Promise<void> => {\n    setEvents(prev => prev.map(event => {\n      if (event.id === eventId) {\n        return {\n          ...event,\n          roles: event.roles.map(role => role.id === roleId ? { ...role, ...updatedRoleData } : role),\n        };\n      }\n      return event;\n    }));\n  }, []);\n\n  const deleteRoleFromEvent = useCallback(async (eventId: string, roleId: string): Promise<void> => {\n    setEvents(prev => prev.map(event => {\n      if (event.id === eventId) {\n        return { ...event, roles: event.roles.filter(role => role.id !== roleId) };\n      }\n      return event;\n    }));\n  }, []);\n  \n  const getMyAssignments = useCallback(async (volunteerId: string): Promise<Event[]> => {\n    const publishedMonths = church.publishedMonths || [];\n    return events\n      .filter(event => {\n        const eventMonth = `${event.eventDate.getFullYear()}-${String(event.eventDate.getMonth() + 1).padStart(2, '0')}`;\n        return publishedMonths.includes(eventMonth);\n      })\n      .map(event => ({\n        ...event,\n        roles: event.roles.filter(role => role.assignedVolunteerId === volunteerId),\n      }))\n      .filter(event => event.roles.length > 0);\n  }, [events, church.publishedMonths]);\n\n  const updateAssignmentStatus = useCallback(async (eventId: string, roleId: string, status: RoleStatus): Promise<void> => {\n    await updateRoleInEvent(eventId, roleId, { status });\n  }, [updateRoleInEvent]);\n  \n  const getVolunteers = useCallback(async (): Promise<Volunteer[]> => {\n    return volunteers;\n  }, [volunteers]);\n\n  const getVolunteersSync = useCallback((): Volunteer[] => {\n    return volunteers;\n  }, [volunteers]);\n\n  const updateVolunteerPreferences = useCallback(async (volunteerId: string, preferences: VolunteerPreferences): Promise<void> => {\n    setVolunteers(prev => prev.map(v => \n        v.id === volunteerId\n            ? { ...v, preferences }\n            : v\n    ));\n  }, []);\n\n  // Universal Roles CRUD\n  const getUniversalRoles = useCallback(async (): Promise<UniversalRole[]> => {\n    return universalRoles;\n  }, [universalRoles]);\n  \n  const addUniversalRole = useCallback(async (name: string, description?: string): Promise<UniversalRole> => {\n      const newRole: UniversalRole = { id: `urole_${Date.now()}`, name, description };\n      setUniversalRoles(prev => [...prev, newRole]);\n      return newRole;\n  }, []);\n\n  const updateUniversalRole = useCallback(async (id: string, updates: Partial<Omit<UniversalRole, 'id'>>): Promise<void> => {\n    setUniversalRoles(prev => prev.map(r => r.id === id ? {...r, ...updates} : r));\n    // Also update role name in templates if it changed\n    if (updates.name) {\n      setServiceTemplates(prev => prev.map(t => ({\n        ...t,\n        roles: t.roles.map(tr => tr.roleId === id ? { ...tr, name: updates.name! } : tr)\n      })))\n    }\n  }, []);\n\n  const deleteUniversalRole = useCallback(async (id: string): Promise<void> => {\n      setUniversalRoles(prev => prev.filter(r => r.id !== id));\n      // Also remove from any templates\n      setServiceTemplates(prev => prev.map(t => ({...t, roles: t.roles.filter(role => role.roleId !== id) })));\n  }, []);\n\n  // Service Templates CRUD\n  const getServiceTemplates = useCallback(async (): Promise<ServiceTemplate[]> => {\n    return serviceTemplates;\n  }, [serviceTemplates]);\n\n  const createServiceTemplate = useCallback(async (name: string, roles: TemplateRole[]): Promise<ServiceTemplate> => {\n      const newTemplate: ServiceTemplate = { id: `template_${Date.now()}`, name, roles };\n      setServiceTemplates(prev => [...prev, newTemplate]);\n      return newTemplate;\n  }, []);\n\n  const updateServiceTemplate = useCallback(async (id: string, updates: Partial<Omit<ServiceTemplate, 'id'>>): Promise<void> => {\n      setServiceTemplates(prev => prev.map(t => t.id === id ? {...t, ...updates} : t));\n  }, []);\n  \n  const deleteServiceTemplate = useCallback(async (id: string): Promise<void> => {\n      setServiceTemplates(prev => prev.filter(t => t.id !== id));\n  }, []);\n\n  // Volunteer Availability\n  const getVolunteerAvailability = useCallback(async (volunteerId: string): Promise<Date[]> => {\n      const family = families.find(f => f.members.some(m => m.id === volunteerId)) || families.find(f => f.id === MOCK_FAMILY_ID);\n      if (!family) return [];\n\n      if (volunteerId === 'all') {\n          if (family.members.length === 0) return [];\n          \n          const memberAvailabilities: Date[][] = family.members.map(member => {\n              return availability.find(a => a.volunteerId === member.id)?.unavailableDates || [];\n          });\n\n          if (memberAvailabilities.length === 0) return [];\n\n          // Find the intersection of all unavailability arrays. A day is only a shared unavailable day if EVERY member is unavailable.\n          const sharedUnavailableDates = memberAvailabilities.reduce((acc, current) => {\n              const currentTimestamps = new Set(current.map(d => d.getTime()));\n              return acc.filter(date => currentTimestamps.has(date.getTime()));\n          });\n\n          return sharedUnavailableDates;\n\n      } else {\n        const record = availability.find(a => a.volunteerId === volunteerId);\n        return record ? record.unavailableDates : [];\n      }\n  }, [availability, families]);\n\n const toggleVolunteerAvailability = useCallback(async (volunteerId: string, date: Date): Promise<void> => {\n    setAvailability(prevAvailability => {\n      let newAvailability = [...prevAvailability];\n      const family = families.find(f => f.members.some(m => m.id === volunteerId)) || families.find(f => f.id === MOCK_FAMILY_ID);\n      const memberIds = family ? family.members.map(m => m.id) : [volunteerId];\n\n      if (volunteerId === 'all') {\n        const isUnavailableForAll = memberIds.every(id => \n          newAvailability.find(a => a.volunteerId === id)?.unavailableDates.some(d => isSameDay(d, date))\n        );\n\n        memberIds.forEach(id => {\n          let record = newAvailability.find(a => a.volunteerId === id);\n          if (record) {\n            const dateExists = record.unavailableDates.some(d => isSameDay(d, date));\n            let updatedDates;\n            if (isUnavailableForAll) { // Make available\n              if (dateExists) {\n                updatedDates = record.unavailableDates.filter(d => !isSameDay(d, date));\n              } else {\n                updatedDates = record.unavailableDates;\n              }\n            } else { // Make unavailable\n              if (!dateExists) {\n                updatedDates = [...record.unavailableDates, date];\n              } else {\n                updatedDates = record.unavailableDates;\n              }\n            }\n            newAvailability = newAvailability.map(a => a.volunteerId === id ? { ...a, unavailableDates: updatedDates } : a);\n          } else if (!isUnavailableForAll) {\n            newAvailability.push({ volunteerId: id, unavailableDates: [date] });\n          }\n        });\n\n      } else {\n        let record = newAvailability.find(a => a.volunteerId === volunteerId);\n        if (record) {\n          const dateExists = record.unavailableDates.some(d => isSameDay(d, date));\n          const updatedDates = dateExists\n            ? record.unavailableDates.filter(d => !isSameDay(d, date))\n            : [...record.unavailableDates, date];\n          newAvailability = newAvailability.map(a => a.volunteerId === volunteerId ? { ...a, unavailableDates: updatedDates } : a);\n        } else {\n          newAvailability.push({ volunteerId: volunteerId, unavailableDates: [date] });\n        }\n      }\n      return newAvailability;\n    });\n  }, [families]);\n  \n  // Church Settings\n  const getChurchSync = useCallback((): Church => {\n    return church;\n  }, [church]);\n\n  const getChurch = useCallback(async (): Promise<Church> => {\n    return church;\n  }, [church]);\n\n  const updateChurch = useCallback(async (updates: Partial<Omit<Church, 'id'>>): Promise<void> => {\n    setChurch(prev => ({ ...prev, ...updates }));\n  }, []);\n\n  const isMonthPublished = useCallback((monthStr: string): boolean => {\n    return church.publishedMonths?.includes(monthStr) ?? false;\n  }, [church.publishedMonths]);\n\n  const publishMonth = useCallback((monthStr: string) => {\n    setChurch(prev => {\n        const publishedMonths = prev.publishedMonths || [];\n        if (publishedMonths.includes(monthStr)) {\n            return prev; // Already published\n        }\n        return { ...prev, publishedMonths: [...publishedMonths, monthStr] };\n    })\n  }, []);\n\n\n  // Family\n  const getFamilyByVolunteerId = useCallback(async (volunteerId: string): Promise<Family | null> => {\n      const volunteer = volunteers.find(v => v.id === volunteerId);\n      if (!volunteer?.familyId) return null;\n      return families.find(f => f.id === volunteer.familyId) ?? null;\n  }, [volunteers, families]);\n\n  const addFamilyMember = useCallback(async (familyId: string, name: string, email: string): Promise<void> => {\n      const newVolunteer: Volunteer = {\n          id: `user_volunteer_${Date.now()}`,\n          name,\n          email,\n          phone: '',\n          familyId,\n          preferences: {\n              preferredRoleIds: [],\n              servingFrequency: 'as-needed',\n              familyServingPreference: 'possible',\n              familyManagementEnabled: true,\n          }\n      };\n      setVolunteers(prev => [...prev, newVolunteer]);\n      setFamilies(prev => prev.map(f => {\n          if (f.id === familyId) {\n              return { ...f, members: [...f.members, { id: newVolunteer.id, name, isPrimary: false }] };\n          }\n          return f;\n      }));\n  }, []);\n\n  const removeFamilyMember = useCallback(async (familyId: string, volunteerId: string): Promise<void> => {\n      setVolunteers(prev => prev.filter(v => v.id !== volunteerId));\n      setFamilies(prev => prev.map(f => {\n          if (f.id === familyId) {\n              return { ...f, members: f.members.filter(m => m.id !== volunteerId) };\n          }\n          return f;\n      }));\n  }, []);\n\n\n  return useMemo(() => ({ \n    events, \n    getEvents,\n    createEvent,\n    updateEvent,\n    addRoleToEvent,\n    updateRoleInEvent,\n    deleteRoleFromEvent,\n    getMyAssignments, \n    updateAssignmentStatus,\n    getVolunteers,\n    getVolunteersSync,\n    updateVolunteerPreferences,\n    universalRoles,\n    getUniversalRoles,\n    addUniversalRole,\n    updateUniversalRole,\n    deleteUniversalRole,\n    serviceTemplates,\n    getServiceTemplates,\n    createServiceTemplate,\n    updateServiceTemplate,\n    deleteServiceTemplate,\n    getVolunteerAvailability,\n    toggleVolunteerAvailability,\n    getChurchSync,\n    getChurch,\n    updateChurch,\n    isMonthPublished,\n    publishMonth,\n    getFamilyByVolunteerId,\n    addFamilyMember,\n    removeFamilyMember,\n    MOCK_CHURCH_ID,\n    MOCK_VOLUNTEER_ID,\n  }), [\n    events, getEvents, createEvent, updateEvent, addRoleToEvent, updateRoleInEvent, deleteRoleFromEvent,\n    getMyAssignments, updateAssignmentStatus, getVolunteers, getVolunteersSync, updateVolunteerPreferences,\n    universalRoles, getUniversalRoles, addUniversalRole, updateUniversalRole, deleteUniversalRole, serviceTemplates,\n    getServiceTemplates, createServiceTemplate, updateServiceTemplate, deleteServiceTemplate,\n    getVolunteerAvailability, toggleVolunteerAvailability, getChurchSync, getChurch, updateChurch, isMonthPublished, publishMonth,\n    getFamilyByVolunteerId, addFamilyMember, removeFamilyMember\n  ]);\n}\n\n    \n"],"names":[],"mappings":";;;AAKA;AACA;AAAA;AAAA;AAAA;AAJA;;;AAMA,MAAM,iBAAiB;AACvB,MAAM,oBAAoB;AAC1B,MAAM,iBAAiB;AAEvB,MAAM,QAAQ,CAAA,GAAA,4IAAA,CAAA,eAAY,AAAD;AAEzB,MAAM,gBAAwB;IAC1B,IAAI;IACJ,MAAM;IACN,SAAS;IACT,OAAO;IACP,WAAW;IACX,YAAY;IACZ,iBAAiB;QAAC,GAAG,MAAM,WAAW,GAAG,CAAC,EAAE,OAAO,MAAM,QAAQ,KAAK,GAAG,QAAQ,CAAC,GAAG,MAAM;KAAC;AAChG;AAEA,MAAM,kBAA4B;IAC9B;QACI,IAAI;QACJ,SAAS;YACL;gBAAE,IAAI;gBAAoB,MAAM;gBAAiB,WAAW;YAAK;YACjE;gBAAE,IAAI;gBAAoB,MAAM;gBAAiB,WAAW;YAAM;SACrE;IACL;CACH;AAED,MAAM,oBAAiC;IACrC;QACE,IAAI;QACJ,MAAM;QACN,OAAO;QACP,OAAO;QACP,UAAU;QACV,aAAa;YACX,kBAAkB;gBAAC;gBAAW;aAAU;YACxC,kBAAkB;YAClB,yBAAyB;YACzB,yBAAyB;QAC3B;IACF;IACA;QACE,IAAI;QACJ,MAAM;QACN,OAAO;QACP,OAAO;QACP,aAAa;YACX,kBAAkB;gBAAC;gBAAW;aAAU;YACxC,kBAAkB;YAClB,yBAAyB;YACzB,yBAAyB;QAC3B;IACF;IACA;QACE,IAAI;QACJ,MAAM;QACN,OAAO;QACP,OAAO;QACN,aAAa;YACZ,kBAAkB;gBAAC;gBAAW;gBAAW;aAAU;YACnD,kBAAkB;YAClB,yBAAyB;YACzB,yBAAyB;QAC3B;IACF;IACA;QACE,IAAI;QACJ,MAAM;QACN,OAAO;QACP,OAAO;QACN,aAAa;YACZ,kBAAkB,EAAE;YACpB,kBAAkB;YAClB,yBAAyB;YACzB,yBAAyB;QAC3B;IACF;IACA;QACE,IAAI;QACJ,MAAM;QACN,OAAO;QACP,OAAO;QACP,UAAU;QACV,aAAa;YACX,kBAAkB;gBAAC;gBAAW;aAAU;YACxC,kBAAkB;YAClB,yBAAyB;YACzB,yBAAyB;QAC3B;IACF;CACD;AAED,MAAM,wBAAyC;IAC7C;QAAE,IAAI;QAAW,MAAM;QAAU,aAAa;IAA2C;IACzF;QAAE,IAAI;QAAW,MAAM;QAAW,aAAa;IAAyC;IACxF;QAAE,IAAI;QAAW,MAAM;QAAS,aAAa;IAA4C;IACzF;QAAE,IAAI;QAAW,MAAM;QAAU,aAAa;IAAqC;IACnF;QAAE,IAAI;QAAW,MAAM;QAAW,aAAa;IAA4C;IAC3F;QAAE,IAAI;QAAW,MAAM;QAAQ,aAAa;IAAsC;IAClF;QAAE,IAAI;QAAW,MAAM;QAAU,aAAa;IAAuC;CACtF;AAED,MAAM,0BAA6C;IAC/C;QACI,IAAI;QACJ,MAAM;QACN,OAAO;YACH;gBAAE,YAAY;gBAAS,QAAQ;gBAAW,MAAM;YAAS;YACzD;gBAAE,YAAY;gBAAS,QAAQ;gBAAW,MAAM;YAAU;YAC1D;gBAAE,YAAY;gBAAS,QAAQ;gBAAW,MAAM;YAAQ;YACxD;gBAAE,YAAY;gBAAS,QAAQ;gBAAW,MAAM;YAAQ;YACxD;gBAAE,YAAY;gBAAS,QAAQ;gBAAW,MAAM;YAAU;SAC7D;IACL;IACA;QACI,IAAI;QACJ,MAAM;QACN,OAAO;YACH;gBAAE,YAAY;gBAAS,QAAQ;gBAAW,MAAM;YAAO;YACvD;gBAAE,YAAY;gBAAS,QAAQ;gBAAW,MAAM;YAAO;YACvD;gBAAE,YAAY;gBAAS,QAAQ;gBAAW,MAAM;YAAS;YACzD;gBAAE,YAAY;gBAAS,QAAQ;gBAAW,MAAM;YAAU;SAC7D;IACL;CACH;AAED,MAAM,sBAA+C;IACjD;QACI,aAAa;QACb,kBAAkB;YAAC,CAAA,GAAA,uIAAA,CAAA,UAAO,AAAD,EAAE,OAAO;YAAK,CAAA,GAAA,uIAAA,CAAA,UAAO,AAAD,EAAE,OAAO;SAAI;IAC9D;IACA;QACI,aAAa;QACb,kBAAkB;YAAC,CAAA,GAAA,uIAAA,CAAA,UAAO,AAAD,EAAE,OAAO;YAAK,CAAA,GAAA,uIAAA,CAAA,UAAO,AAAD,EAAE,OAAO;SAAI;IAC9D;CACH;AAGD,MAAM,gBAAyB;IAC7B;QACE,IAAI;QACJ,UAAU;QACV,WAAW;QACX,WAAW,CAAA,GAAA,uIAAA,CAAA,UAAO,AAAD,EAAE,OAAO;QAC1B,OAAO;QACP,OAAO;YACL;gBAAE,IAAI;gBAAY,UAAU;gBAAU,qBAAqB;gBAAoB,uBAAuB;gBAAiB,QAAQ;YAAU;YACzI;gBAAE,IAAI;gBAAY,UAAU;gBAAW,qBAAqB;gBAAoB,uBAAuB;gBAAgB,QAAQ;YAAY;YAC3I;gBAAE,IAAI;gBAAY,UAAU;gBAAS,qBAAqB;gBAAM,uBAAuB;gBAAM,QAAQ;YAAU;SAChH;IACH;IACA;QACE,IAAI;QACJ,UAAU;QACV,WAAW;QACX,WAAW,CAAA,GAAA,uIAAA,CAAA,UAAO,AAAD,EAAE,OAAO;QAC1B,OAAO;YACL;gBAAE,IAAI;gBAAY,UAAU;gBAAU,qBAAqB;gBAAoB,uBAAuB;gBAAiB,QAAQ;YAAY;SAC5I;IACH;IACA;QACE,IAAI;QACJ,UAAU;QACV,WAAW;QACX,WAAW,CAAA,GAAA,uIAAA,CAAA,UAAO,AAAD,EAAE,OAAO;QAC1B,OAAO;QACP,OAAO;YACL;gBAAE,IAAI;gBAAY,UAAU;gBAAQ,qBAAqB;gBAAoB,uBAAuB;gBAAiB,QAAQ;YAAW;YACxI;gBAAE,IAAI;gBAAY,UAAU;gBAAU,qBAAqB;gBAAoB,uBAAuB;gBAAgB,QAAQ;YAAU;YACxI;gBAAE,IAAI;gBAAY,UAAU;gBAAW,qBAAqB;gBAAoB,uBAAuB;gBAAiB,QAAQ;YAAU;SAC3I;IACH;IACE;QACA,IAAI;QACJ,UAAU;QACV,WAAW;QACX,WAAW,CAAA,GAAA,uIAAA,CAAA,UAAO,AAAD,EAAE,OAAO;QAC1B,OAAO;QACP,OAAO;YACL;gBAAE,IAAI;gBAAY,UAAU;gBAAU,qBAAqB;gBAAoB,uBAAuB;gBAAiB,QAAQ;YAAY;SAC5I;IACH;CACD;AAGM,SAAS;IACd,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAW;IAC9C,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe;IAC1D,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAmB;IACtE,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAqB;IAC5E,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAA2B;IAC1E,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IAC7C,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAY;IAGnD,MAAM,YAAY,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,OAAO;QACnC,OAAO,OAAO,MAAM,CAAC,CAAA,QAAS,MAAM,QAAQ,KAAK;IACnD,GAAG;QAAC;KAAO;IAEX,MAAM,cAAc,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,OAAO,cAAwD;QAC7F,IAAI,WAAmB,EAAE;QACzB,IAAI,YAAY;YACZ,MAAM,WAAW,iBAAiB,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;YACrD,IAAI,UAAU;gBACV,WAAW,SAAS,KAAK,CAAC,GAAG,CAAC,CAAA,eAAgB,CAAC;wBAC3C,IAAI,CAAC,KAAK,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,aAAa,UAAU,EAAE;wBACnD,UAAU,aAAa,IAAI;wBAC3B,qBAAqB;wBACrB,uBAAuB;wBACvB,QAAQ;oBACZ,CAAC;YACL;QACJ;QAEA,MAAM,WAAkB;YACtB,GAAG,YAAY;YACf,IAAI,CAAC,MAAM,EAAE,KAAK,GAAG,IAAI;YACzB,UAAU;YACV,OAAO;QACT;QACA,UAAU,CAAA,OAAQ;mBAAI;gBAAM;aAAS;QACrC,OAAO;IACT,GAAG;QAAC;KAAiB;IAErB,MAAM,cAAc,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,OAAO,SAAiB;QACtD,UAAU,CAAA,OAAQ,KAAK,GAAG,CAAC,CAAA,QAAS,MAAM,EAAE,KAAK,UAAU;oBAAE,GAAG,KAAK;oBAAE,GAAG,WAAW;gBAAC,IAAI;IAC5F,GAAG,EAAE;IAEL,MAAM,iBAAiB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,OAAO,SAAiB;QACzD,MAAM,UAAgB;YACpB,GAAG,QAAQ;YACX,IAAI,CAAC,KAAK,EAAE,KAAK,GAAG,IAAI;QAC1B;QACA,UAAU,CAAA,OAAQ,KAAK,GAAG,CAAC,CAAA;gBACzB,IAAI,MAAM,EAAE,KAAK,SAAS;oBACxB,OAAO;wBAAE,GAAG,KAAK;wBAAE,OAAO;+BAAI,MAAM,KAAK;4BAAE;yBAAQ;oBAAC;gBACtD;gBACA,OAAO;YACT;QACA,OAAO;IACT,GAAG,EAAE;IAEL,MAAM,oBAAoB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,OAAO,SAAiB,QAAgB;QAC5E,UAAU,CAAA,OAAQ,KAAK,GAAG,CAAC,CAAA;gBACzB,IAAI,MAAM,EAAE,KAAK,SAAS;oBACxB,OAAO;wBACL,GAAG,KAAK;wBACR,OAAO,MAAM,KAAK,CAAC,GAAG,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK,SAAS;gCAAE,GAAG,IAAI;gCAAE,GAAG,eAAe;4BAAC,IAAI;oBACxF;gBACF;gBACA,OAAO;YACT;IACF,GAAG,EAAE;IAEL,MAAM,sBAAsB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,OAAO,SAAiB;QAC9D,UAAU,CAAA,OAAQ,KAAK,GAAG,CAAC,CAAA;gBACzB,IAAI,MAAM,EAAE,KAAK,SAAS;oBACxB,OAAO;wBAAE,GAAG,KAAK;wBAAE,OAAO,MAAM,KAAK,CAAC,MAAM,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK;oBAAQ;gBAC3E;gBACA,OAAO;YACT;IACF,GAAG,EAAE;IAEL,MAAM,mBAAmB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,OAAO;QAC1C,MAAM,kBAAkB,OAAO,eAAe,IAAI,EAAE;QACpD,OAAO,OACJ,MAAM,CAAC,CAAA;YACN,MAAM,aAAa,GAAG,MAAM,SAAS,CAAC,WAAW,GAAG,CAAC,EAAE,OAAO,MAAM,SAAS,CAAC,QAAQ,KAAK,GAAG,QAAQ,CAAC,GAAG,MAAM;YAChH,OAAO,gBAAgB,QAAQ,CAAC;QAClC,GACC,GAAG,CAAC,CAAA,QAAS,CAAC;gBACb,GAAG,KAAK;gBACR,OAAO,MAAM,KAAK,CAAC,MAAM,CAAC,CAAA,OAAQ,KAAK,mBAAmB,KAAK;YACjE,CAAC,GACA,MAAM,CAAC,CAAA,QAAS,MAAM,KAAK,CAAC,MAAM,GAAG;IAC1C,GAAG;QAAC;QAAQ,OAAO,eAAe;KAAC;IAEnC,MAAM,yBAAyB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,OAAO,SAAiB,QAAgB;QACjF,MAAM,kBAAkB,SAAS,QAAQ;YAAE;QAAO;IACpD,GAAG;QAAC;KAAkB;IAEtB,MAAM,gBAAgB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE;QAChC,OAAO;IACT,GAAG;QAAC;KAAW;IAEf,MAAM,oBAAoB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE;QACpC,OAAO;IACT,GAAG;QAAC;KAAW;IAEf,MAAM,6BAA6B,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,OAAO,aAAqB;QACzE,cAAc,CAAA,OAAQ,KAAK,GAAG,CAAC,CAAA,IAC3B,EAAE,EAAE,KAAK,cACH;oBAAE,GAAG,CAAC;oBAAE;gBAAY,IACpB;IAEZ,GAAG,EAAE;IAEL,uBAAuB;IACvB,MAAM,oBAAoB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE;QACpC,OAAO;IACT,GAAG;QAAC;KAAe;IAEnB,MAAM,mBAAmB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,OAAO,MAAc;QACtD,MAAM,UAAyB;YAAE,IAAI,CAAC,MAAM,EAAE,KAAK,GAAG,IAAI;YAAE;YAAM;QAAY;QAC9E,kBAAkB,CAAA,OAAQ;mBAAI;gBAAM;aAAQ;QAC5C,OAAO;IACX,GAAG,EAAE;IAEL,MAAM,sBAAsB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,OAAO,IAAY;QACzD,kBAAkB,CAAA,OAAQ,KAAK,GAAG,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,KAAK;oBAAC,GAAG,CAAC;oBAAE,GAAG,OAAO;gBAAA,IAAI;QAC3E,mDAAmD;QACnD,IAAI,QAAQ,IAAI,EAAE;YAChB,oBAAoB,CAAA,OAAQ,KAAK,GAAG,CAAC,CAAA,IAAK,CAAC;wBACzC,GAAG,CAAC;wBACJ,OAAO,EAAE,KAAK,CAAC,GAAG,CAAC,CAAA,KAAM,GAAG,MAAM,KAAK,KAAK;gCAAE,GAAG,EAAE;gCAAE,MAAM,QAAQ,IAAI;4BAAE,IAAI;oBAC/E,CAAC;QACH;IACF,GAAG,EAAE;IAEL,MAAM,sBAAsB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,OAAO;QAC3C,kBAAkB,CAAA,OAAQ,KAAK,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QACpD,iCAAiC;QACjC,oBAAoB,CAAA,OAAQ,KAAK,GAAG,CAAC,CAAA,IAAK,CAAC;oBAAC,GAAG,CAAC;oBAAE,OAAO,EAAE,KAAK,CAAC,MAAM,CAAC,CAAA,OAAQ,KAAK,MAAM,KAAK;gBAAI,CAAC;IACzG,GAAG,EAAE;IAEL,yBAAyB;IACzB,MAAM,sBAAsB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE;QACtC,OAAO;IACT,GAAG;QAAC;KAAiB;IAErB,MAAM,wBAAwB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,OAAO,MAAc;QAC3D,MAAM,cAA+B;YAAE,IAAI,CAAC,SAAS,EAAE,KAAK,GAAG,IAAI;YAAE;YAAM;QAAM;QACjF,oBAAoB,CAAA,OAAQ;mBAAI;gBAAM;aAAY;QAClD,OAAO;IACX,GAAG,EAAE;IAEL,MAAM,wBAAwB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,OAAO,IAAY;QACzD,oBAAoB,CAAA,OAAQ,KAAK,GAAG,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,KAAK;oBAAC,GAAG,CAAC;oBAAE,GAAG,OAAO;gBAAA,IAAI;IACjF,GAAG,EAAE;IAEL,MAAM,wBAAwB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,OAAO;QAC7C,oBAAoB,CAAA,OAAQ,KAAK,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;IAC1D,GAAG,EAAE;IAEL,yBAAyB;IACzB,MAAM,2BAA2B,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,OAAO;QAChD,MAAM,SAAS,SAAS,IAAI,CAAC,CAAA,IAAK,EAAE,OAAO,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,iBAAiB,SAAS,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QAC5G,IAAI,CAAC,QAAQ,OAAO,EAAE;QAEtB,IAAI,gBAAgB,OAAO;YACvB,IAAI,OAAO,OAAO,CAAC,MAAM,KAAK,GAAG,OAAO,EAAE;YAE1C,MAAM,uBAAiC,OAAO,OAAO,CAAC,GAAG,CAAC,CAAA;gBACtD,OAAO,aAAa,IAAI,CAAC,CAAA,IAAK,EAAE,WAAW,KAAK,OAAO,EAAE,GAAG,oBAAoB,EAAE;YACtF;YAEA,IAAI,qBAAqB,MAAM,KAAK,GAAG,OAAO,EAAE;YAEhD,6HAA6H;YAC7H,MAAM,yBAAyB,qBAAqB,MAAM,CAAC,CAAC,KAAK;gBAC7D,MAAM,oBAAoB,IAAI,IAAI,QAAQ,GAAG,CAAC,CAAA,IAAK,EAAE,OAAO;gBAC5D,OAAO,IAAI,MAAM,CAAC,CAAA,OAAQ,kBAAkB,GAAG,CAAC,KAAK,OAAO;YAChE;YAEA,OAAO;QAEX,OAAO;YACL,MAAM,SAAS,aAAa,IAAI,CAAC,CAAA,IAAK,EAAE,WAAW,KAAK;YACxD,OAAO,SAAS,OAAO,gBAAgB,GAAG,EAAE;QAC9C;IACJ,GAAG;QAAC;QAAc;KAAS;IAE5B,MAAM,8BAA8B,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,OAAO,aAAqB;QACzE,gBAAgB,CAAA;YACd,IAAI,kBAAkB;mBAAI;aAAiB;YAC3C,MAAM,SAAS,SAAS,IAAI,CAAC,CAAA,IAAK,EAAE,OAAO,CAAC,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,iBAAiB,SAAS,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;YAC5G,MAAM,YAAY,SAAS,OAAO,OAAO,CAAC,GAAG,CAAC,CAAA,IAAK,EAAE,EAAE,IAAI;gBAAC;aAAY;YAExE,IAAI,gBAAgB,OAAO;gBACzB,MAAM,sBAAsB,UAAU,KAAK,CAAC,CAAA,KAC1C,gBAAgB,IAAI,CAAC,CAAA,IAAK,EAAE,WAAW,KAAK,KAAK,iBAAiB,KAAK,CAAA,IAAK,CAAA,GAAA,yIAAA,CAAA,YAAS,AAAD,EAAE,GAAG;gBAG3F,UAAU,OAAO,CAAC,CAAA;oBAChB,IAAI,SAAS,gBAAgB,IAAI,CAAC,CAAA,IAAK,EAAE,WAAW,KAAK;oBACzD,IAAI,QAAQ;wBACV,MAAM,aAAa,OAAO,gBAAgB,CAAC,IAAI,CAAC,CAAA,IAAK,CAAA,GAAA,yIAAA,CAAA,YAAS,AAAD,EAAE,GAAG;wBAClE,IAAI;wBACJ,IAAI,qBAAqB;4BACvB,IAAI,YAAY;gCACd,eAAe,OAAO,gBAAgB,CAAC,MAAM,CAAC,CAAA,IAAK,CAAC,CAAA,GAAA,yIAAA,CAAA,YAAS,AAAD,EAAE,GAAG;4BACnE,OAAO;gCACL,eAAe,OAAO,gBAAgB;4BACxC;wBACF,OAAO;4BACL,IAAI,CAAC,YAAY;gCACf,eAAe;uCAAI,OAAO,gBAAgB;oCAAE;iCAAK;4BACnD,OAAO;gCACL,eAAe,OAAO,gBAAgB;4BACxC;wBACF;wBACA,kBAAkB,gBAAgB,GAAG,CAAC,CAAA,IAAK,EAAE,WAAW,KAAK,KAAK;gCAAE,GAAG,CAAC;gCAAE,kBAAkB;4BAAa,IAAI;oBAC/G,OAAO,IAAI,CAAC,qBAAqB;wBAC/B,gBAAgB,IAAI,CAAC;4BAAE,aAAa;4BAAI,kBAAkB;gCAAC;6BAAK;wBAAC;oBACnE;gBACF;YAEF,OAAO;gBACL,IAAI,SAAS,gBAAgB,IAAI,CAAC,CAAA,IAAK,EAAE,WAAW,KAAK;gBACzD,IAAI,QAAQ;oBACV,MAAM,aAAa,OAAO,gBAAgB,CAAC,IAAI,CAAC,CAAA,IAAK,CAAA,GAAA,yIAAA,CAAA,YAAS,AAAD,EAAE,GAAG;oBAClE,MAAM,eAAe,aACjB,OAAO,gBAAgB,CAAC,MAAM,CAAC,CAAA,IAAK,CAAC,CAAA,GAAA,yIAAA,CAAA,YAAS,AAAD,EAAE,GAAG,SAClD;2BAAI,OAAO,gBAAgB;wBAAE;qBAAK;oBACtC,kBAAkB,gBAAgB,GAAG,CAAC,CAAA,IAAK,EAAE,WAAW,KAAK,cAAc;4BAAE,GAAG,CAAC;4BAAE,kBAAkB;wBAAa,IAAI;gBACxH,OAAO;oBACL,gBAAgB,IAAI,CAAC;wBAAE,aAAa;wBAAa,kBAAkB;4BAAC;yBAAK;oBAAC;gBAC5E;YACF;YACA,OAAO;QACT;IACF,GAAG;QAAC;KAAS;IAEb,kBAAkB;IAClB,MAAM,gBAAgB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE;QAChC,OAAO;IACT,GAAG;QAAC;KAAO;IAEX,MAAM,YAAY,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE;QAC5B,OAAO;IACT,GAAG;QAAC;KAAO;IAEX,MAAM,eAAe,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,OAAO;QACtC,UAAU,CAAA,OAAQ,CAAC;gBAAE,GAAG,IAAI;gBAAE,GAAG,OAAO;YAAC,CAAC;IAC5C,GAAG,EAAE;IAEL,MAAM,mBAAmB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,CAAC;QACpC,OAAO,OAAO,eAAe,EAAE,SAAS,aAAa;IACvD,GAAG;QAAC,OAAO,eAAe;KAAC;IAE3B,MAAM,eAAe,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,CAAC;QAChC,UAAU,CAAA;YACN,MAAM,kBAAkB,KAAK,eAAe,IAAI,EAAE;YAClD,IAAI,gBAAgB,QAAQ,CAAC,WAAW;gBACpC,OAAO,MAAM,oBAAoB;YACrC;YACA,OAAO;gBAAE,GAAG,IAAI;gBAAE,iBAAiB;uBAAI;oBAAiB;iBAAS;YAAC;QACtE;IACF,GAAG,EAAE;IAGL,SAAS;IACT,MAAM,yBAAyB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,OAAO;QAC9C,MAAM,YAAY,WAAW,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QAChD,IAAI,CAAC,WAAW,UAAU,OAAO;QACjC,OAAO,SAAS,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,UAAU,QAAQ,KAAK;IAC9D,GAAG;QAAC;QAAY;KAAS;IAEzB,MAAM,kBAAkB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,OAAO,UAAkB,MAAc;QACvE,MAAM,eAA0B;YAC5B,IAAI,CAAC,eAAe,EAAE,KAAK,GAAG,IAAI;YAClC;YACA;YACA,OAAO;YACP;YACA,aAAa;gBACT,kBAAkB,EAAE;gBACpB,kBAAkB;gBAClB,yBAAyB;gBACzB,yBAAyB;YAC7B;QACJ;QACA,cAAc,CAAA,OAAQ;mBAAI;gBAAM;aAAa;QAC7C,YAAY,CAAA,OAAQ,KAAK,GAAG,CAAC,CAAA;gBACzB,IAAI,EAAE,EAAE,KAAK,UAAU;oBACnB,OAAO;wBAAE,GAAG,CAAC;wBAAE,SAAS;+BAAI,EAAE,OAAO;4BAAE;gCAAE,IAAI,aAAa,EAAE;gCAAE;gCAAM,WAAW;4BAAM;yBAAE;oBAAC;gBAC5F;gBACA,OAAO;YACX;IACJ,GAAG,EAAE;IAEL,MAAM,qBAAqB,CAAA,GAAA,qMAAA,CAAA,cAAW,AAAD,EAAE,OAAO,UAAkB;QAC5D,cAAc,CAAA,OAAQ,KAAK,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QAChD,YAAY,CAAA,OAAQ,KAAK,GAAG,CAAC,CAAA;gBACzB,IAAI,EAAE,EAAE,KAAK,UAAU;oBACnB,OAAO;wBAAE,GAAG,CAAC;wBAAE,SAAS,EAAE,OAAO,CAAC,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;oBAAa;gBACxE;gBACA,OAAO;YACX;IACJ,GAAG,EAAE;IAGL,OAAO,CAAA,GAAA,qMAAA,CAAA,UAAO,AAAD,EAAE,IAAM,CAAC;YACpB;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;QACF,CAAC,GAAG;QACF;QAAQ;QAAW;QAAa;QAAa;QAAgB;QAAmB;QAChF;QAAkB;QAAwB;QAAe;QAAmB;QAC5E;QAAgB;QAAmB;QAAkB;QAAqB;QAAqB;QAC/F;QAAqB;QAAuB;QAAuB;QACnE;QAA0B;QAA6B;QAAe;QAAW;QAAc;QAAkB;QACjH;QAAwB;QAAiB;KAC1C;AACH","debugId":null}},
    {"offset": {"line": 792, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/hooks/use-wizard.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext, useState, ReactNode } from 'react';\n\ninterface Step {\n  id: string;\n  name: string;\n  component: React.ComponentType<any>;\n  onNext?: () => Promise<void> | void;\n}\n\ninterface WizardContextType {\n  steps: Step[];\n  activeStep: number;\n  isFirstStep: boolean;\n  isLastStep: boolean;\n  isProcessing: boolean;\n  setIsProcessing: (isProcessing: boolean) => void;\n  goToNextStep: () => void;\n  goToPreviousStep: () => void;\n}\n\nconst WizardContext = createContext<WizardContextType | undefined>(undefined);\n\nexport function WizardProvider({ steps, children }: { steps: Step[]; children: ReactNode }) {\n  const [activeStep, setActiveStep] = useState(0);\n  const [isProcessing, setIsProcessing] = useState(false);\n\n  const isFirstStep = activeStep === 0;\n  const isLastStep = activeStep === steps.length - 1;\n\n  const goToNextStep = async () => {\n    const currentStep = steps[activeStep];\n    if (currentStep.onNext) {\n        setIsProcessing(true);\n        try {\n            await currentStep.onNext();\n        } catch (e) {\n            // Error handling should be done inside the onNext function itself\n            // e.g. showing a toast\n        } finally {\n            setIsProcessing(false);\n        }\n    } else {\n       if (!isLastStep) {\n         setActiveStep((prev) => prev + 1);\n       }\n    }\n  };\n\n  const goToPreviousStep = () => {\n    if (!isFirstStep) {\n      setActiveStep((prev) => prev - 1);\n    }\n  };\n\n  const value = {\n    steps,\n    activeStep,\n    isFirstStep,\n    isLastStep,\n    isProcessing,\n    setIsProcessing,\n    goToNextStep,\n    goToPreviousStep,\n  };\n\n  return <WizardContext.Provider value={value}>{children}</WizardContext.Provider>;\n}\n\nexport function useWizard() {\n  const context = useContext(WizardContext);\n  if (context === undefined) {\n    throw new Error('useWizard must be used within a WizardProvider');\n  }\n  return context;\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAsBA,MAAM,8BAAgB,CAAA,GAAA,qMAAA,CAAA,gBAAa,AAAD,EAAiC;AAE5D,SAAS,eAAe,EAAE,KAAK,EAAE,QAAQ,EAA0C;IACxF,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEjD,MAAM,cAAc,eAAe;IACnC,MAAM,aAAa,eAAe,MAAM,MAAM,GAAG;IAEjD,MAAM,eAAe;QACnB,MAAM,cAAc,KAAK,CAAC,WAAW;QACrC,IAAI,YAAY,MAAM,EAAE;YACpB,gBAAgB;YAChB,IAAI;gBACA,MAAM,YAAY,MAAM;YAC5B,EAAE,OAAO,GAAG;YACR,kEAAkE;YAClE,uBAAuB;YAC3B,SAAU;gBACN,gBAAgB;YACpB;QACJ,OAAO;YACJ,IAAI,CAAC,YAAY;gBACf,cAAc,CAAC,OAAS,OAAO;YACjC;QACH;IACF;IAEA,MAAM,mBAAmB;QACvB,IAAI,CAAC,aAAa;YAChB,cAAc,CAAC,OAAS,OAAO;QACjC;IACF;IAEA,MAAM,QAAQ;QACZ;QACA;QACA;QACA;QACA;QACA;QACA;QACA;IACF;IAEA,qBAAO,8OAAC,cAAc,QAAQ;QAAC,OAAO;kBAAQ;;;;;;AAChD;AAEO,SAAS;IACd,MAAM,UAAU,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAAE;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 862, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/ai/flows/extract-schedule-data-flow.ts"],"sourcesContent":["'use server';\n/**\n * @fileOverview Extracts structured data from a volunteer schedule document.\n * \n * - extractScheduleData - A function that parses a document and extracts volunteer, role, and event data.\n * - ExtractScheduleDataInput - The input type for the function.\n * - ExtractedScheduleData - The return type for the function.\n */\n\nimport { ai } from '@/ai/genkit';\nimport { z } from 'zod';\n\nconst ExtractedVolunteerSchema = z.object({\n  name: z.string().describe('The full name of the volunteer.'),\n  email: z.string().optional().describe('The email address, if found.'),\n  phone: z.string().optional().describe('The phone number, if found.'),\n});\n\nconst ExtractedRoleSchema = z.object({\n    name: z.string().describe('The name of the volunteer role.'),\n    description: z.string().optional().describe('A generated one-sentence description of the role.'),\n});\n\nconst ExtractedEventSchema = z.object({\n    eventName: z.string().describe('The name of the service or event.'),\n    eventDate: z.string().datetime().describe('The date and time of the event in ISO 8601 format.'),\n    roles: z.array(z.object({\n        roleName: z.string().describe('The role for this event.'),\n        assignedVolunteerName: z.string().optional().describe('The name of the volunteer assigned to this role for this event.'),\n    })).describe('The list of roles for this specific event.'),\n});\n\nconst SuggestedTemplateSchema = z.object({\n    name: z.string().describe(\"A suggested name for the template (e.g., 'Sunday Morning Service').\"),\n    roles: z.array(z.string()).describe('A list of role names that make up this template.'),\n});\n\nexport const ExtractedScheduleDataSchema = z.object({\n  volunteers: z.array(ExtractedVolunteerSchema).describe('A list of all unique volunteers found in the document.'),\n  roles: z.array(ExtractedRoleSchema).describe('A list of all unique volunteer roles found in the document.'),\n  events: z.array(ExtractedEventSchema).describe('A list of all specific events or services found.'),\n  templates: z.array(SuggestedTemplateSchema).describe('A list of suggested service templates based on recurring event structures.'),\n});\n\nexport type ExtractedScheduleData = z.infer<typeof ExtractedScheduleDataSchema>;\n\nexport const ExtractScheduleDataInputSchema = z.object({\n  documentDataUri: z\n    .string()\n    .describe(\n      \"The volunteer schedule document (e.g., PDF, Word, Excel) as a data URI. Must include a MIME type and use Base64 encoding. Format: 'data:<mimetype>;base64,<encoded_data>'.\"\n    ),\n});\nexport type ExtractScheduleDataInput = z.infer<typeof ExtractScheduleDataInputSchema>;\n\n\nexport async function extractScheduleData(input: ExtractScheduleDataInput): Promise<ExtractedScheduleData> {\n  const prompt = ai.definePrompt({\n    name: 'extractScheduleDataPrompt',\n    input: { schema: ExtractScheduleDataInputSchema },\n    output: { schema: ExtractedScheduleDataSchema },\n    prompt: `You are an expert data extraction assistant for a church volunteer scheduling app called Weaver's Loom. Your task is to analyze the provided document and extract all relevant scheduling information.\n\nThe document is a volunteer schedule. It could be a PDF, Word document, or an Excel spreadsheet.\n\nAnalyze the document provided via the data URI: {{media url=documentDataUri}}\n\nExtract the following information:\n\n1.  **Volunteers**: Identify every unique person mentioned as a volunteer. Extract their full name. If available, also extract their email and phone number.\n2.  **Roles**: Identify all the unique volunteer roles mentioned (e.g., \"Lector\", \"Usher\", \"Acolyte\", \"Coffee Hour Host\"). For each role, provide a simple, friendly one-sentence description.\n3.  **Events**: List every specific service or event instance. For each event, extract its name (e.g., \"Sunday Morning Eucharist\"), its full date and time (as an ISO 8601 string), and a list of roles required for that specific event, including who is assigned to each role.\n4.  **Templates**: Analyze the events to find recurring patterns. If multiple events have the same name and a similar set of roles (e.g., every \"Sunday Morning Eucharist\" has a Lector, two Ushers, and an Acolyte), create a suggested service template. The template should have a name and a list of the role names it includes.\n\nReturn the extracted data in the structured JSON format defined by the output schema. Pay close attention to data types and formats, especially for dates.`,\n  });\n\n  const { output } = await prompt(input);\n  return output!;\n}\n"],"names":[],"mappings":";;;;;;IAwDsB,sBAAA,WAAA,GAAA,CAAA,GAAA,sNAAA,CAAA,wBAAA,EAAA,8CAAA,sNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,sNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 875, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/ai/flows/extract-schedule-data-flow.ts"],"sourcesContent":["'use server';\n/**\n * @fileOverview Extracts structured data from a volunteer schedule document.\n * \n * - extractScheduleData - A function that parses a document and extracts volunteer, role, and event data.\n * - ExtractScheduleDataInput - The input type for the function.\n * - ExtractedScheduleData - The return type for the function.\n */\n\nimport { ai } from '@/ai/genkit';\nimport { z } from 'zod';\n\nconst ExtractedVolunteerSchema = z.object({\n  name: z.string().describe('The full name of the volunteer.'),\n  email: z.string().optional().describe('The email address, if found.'),\n  phone: z.string().optional().describe('The phone number, if found.'),\n});\n\nconst ExtractedRoleSchema = z.object({\n    name: z.string().describe('The name of the volunteer role.'),\n    description: z.string().optional().describe('A generated one-sentence description of the role.'),\n});\n\nconst ExtractedEventSchema = z.object({\n    eventName: z.string().describe('The name of the service or event.'),\n    eventDate: z.string().datetime().describe('The date and time of the event in ISO 8601 format.'),\n    roles: z.array(z.object({\n        roleName: z.string().describe('The role for this event.'),\n        assignedVolunteerName: z.string().optional().describe('The name of the volunteer assigned to this role for this event.'),\n    })).describe('The list of roles for this specific event.'),\n});\n\nconst SuggestedTemplateSchema = z.object({\n    name: z.string().describe(\"A suggested name for the template (e.g., 'Sunday Morning Service').\"),\n    roles: z.array(z.string()).describe('A list of role names that make up this template.'),\n});\n\nexport const ExtractedScheduleDataSchema = z.object({\n  volunteers: z.array(ExtractedVolunteerSchema).describe('A list of all unique volunteers found in the document.'),\n  roles: z.array(ExtractedRoleSchema).describe('A list of all unique volunteer roles found in the document.'),\n  events: z.array(ExtractedEventSchema).describe('A list of all specific events or services found.'),\n  templates: z.array(SuggestedTemplateSchema).describe('A list of suggested service templates based on recurring event structures.'),\n});\n\nexport type ExtractedScheduleData = z.infer<typeof ExtractedScheduleDataSchema>;\n\nexport const ExtractScheduleDataInputSchema = z.object({\n  documentDataUri: z\n    .string()\n    .describe(\n      \"The volunteer schedule document (e.g., PDF, Word, Excel) as a data URI. Must include a MIME type and use Base64 encoding. Format: 'data:<mimetype>;base64,<encoded_data>'.\"\n    ),\n});\nexport type ExtractScheduleDataInput = z.infer<typeof ExtractScheduleDataInputSchema>;\n\n\nexport async function extractScheduleData(input: ExtractScheduleDataInput): Promise<ExtractedScheduleData> {\n  const prompt = ai.definePrompt({\n    name: 'extractScheduleDataPrompt',\n    input: { schema: ExtractScheduleDataInputSchema },\n    output: { schema: ExtractedScheduleDataSchema },\n    prompt: `You are an expert data extraction assistant for a church volunteer scheduling app called Weaver's Loom. Your task is to analyze the provided document and extract all relevant scheduling information.\n\nThe document is a volunteer schedule. It could be a PDF, Word document, or an Excel spreadsheet.\n\nAnalyze the document provided via the data URI: {{media url=documentDataUri}}\n\nExtract the following information:\n\n1.  **Volunteers**: Identify every unique person mentioned as a volunteer. Extract their full name. If available, also extract their email and phone number.\n2.  **Roles**: Identify all the unique volunteer roles mentioned (e.g., \"Lector\", \"Usher\", \"Acolyte\", \"Coffee Hour Host\"). For each role, provide a simple, friendly one-sentence description.\n3.  **Events**: List every specific service or event instance. For each event, extract its name (e.g., \"Sunday Morning Eucharist\"), its full date and time (as an ISO 8601 string), and a list of roles required for that specific event, including who is assigned to each role.\n4.  **Templates**: Analyze the events to find recurring patterns. If multiple events have the same name and a similar set of roles (e.g., every \"Sunday Morning Eucharist\" has a Lector, two Ushers, and an Acolyte), create a suggested service template. The template should have a name and a list of the role names it includes.\n\nReturn the extracted data in the structured JSON format defined by the output schema. Pay close attention to data types and formats, especially for dates.`,\n  });\n\n  const { output } = await prompt(input);\n  return output!;\n}\n"],"names":[],"mappings":";;;;;;IAqCa,8BAAA,WAAA,GAAA,CAAA,GAAA,sNAAA,CAAA,wBAAA,EAAA,8CAAA,sNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,sNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 888, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/admin/setup-wizard/ProgressBar.tsx"],"sourcesContent":["'use client';\n\nimport { useWizard } from '@/hooks/use-wizard';\nimport { Check } from 'lucide-react';\nimport { cn } from '@/lib/utils';\n\nexport function WizardProgressBar() {\n  const { activeStep, steps } = useWizard();\n\n  return (\n    <nav aria-label=\"Progress\">\n      <ol role=\"list\" className=\"space-y-4 md:flex md:space-x-8 md:space-y-0\">\n        {steps.map((step, index) => (\n          <li key={step.name} className=\"md:flex-1\">\n            {index < activeStep ? (\n              <div className=\"group flex w-full flex-col border-l-4 border-primary py-2 pl-4 transition-colors md:border-l-0 md:border-t-4 md:pb-0 md:pl-0 md:pt-4\">\n                <span className=\"text-sm font-medium text-primary transition-colors \">\n                  {step.id}\n                </span>\n                <span className=\"text-sm font-medium\">{step.name}</span>\n              </div>\n            ) : index === activeStep ? (\n              <div\n                className=\"flex w-full flex-col border-l-4 border-primary py-2 pl-4 md:border-l-0 md:border-t-4 md:pb-0 md:pl-0 md:pt-4\"\n                aria-current=\"step\"\n              >\n                <span className=\"text-sm font-medium text-primary\">{step.id}</span>\n                <span className=\"text-sm font-medium\">{step.name}</span>\n              </div>\n            ) : (\n              <div className=\"group flex w-full flex-col border-l-4 border-border py-2 pl-4 transition-colors md:border-l-0 md:border-t-4 md:pb-0 md:pl-0 md:pt-4\">\n                <span className=\"text-sm font-medium text-muted-foreground transition-colors\">\n                  {step.id}\n                </span>\n                <span className=\"text-sm font-medium\">{step.name}</span>\n              </div>\n            )}\n          </li>\n        ))}\n      </ol>\n    </nav>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AAFA;;;AAMO,SAAS;IACd,MAAM,EAAE,UAAU,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,8HAAA,CAAA,YAAS,AAAD;IAEtC,qBACE,8OAAC;QAAI,cAAW;kBACd,cAAA,8OAAC;YAAG,MAAK;YAAO,WAAU;sBACvB,MAAM,GAAG,CAAC,CAAC,MAAM,sBAChB,8OAAC;oBAAmB,WAAU;8BAC3B,QAAQ,2BACP,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAK,WAAU;0CACb,KAAK,EAAE;;;;;;0CAEV,8OAAC;gCAAK,WAAU;0CAAuB,KAAK,IAAI;;;;;;;;;;;+BAEhD,UAAU,2BACZ,8OAAC;wBACC,WAAU;wBACV,gBAAa;;0CAEb,8OAAC;gCAAK,WAAU;0CAAoC,KAAK,EAAE;;;;;;0CAC3D,8OAAC;gCAAK,WAAU;0CAAuB,KAAK,IAAI;;;;;;;;;;;6CAGlD,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAK,WAAU;0CACb,KAAK,EAAE;;;;;;0CAEV,8OAAC;gCAAK,WAAU;0CAAuB,KAAK,IAAI;;;;;;;;;;;;mBArB7C,KAAK,IAAI;;;;;;;;;;;;;;;AA6B5B","debugId":null}},
    {"offset": {"line": 1001, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/admin/setup-wizard/SetupWizard.tsx"],"sourcesContent":["'use client';\n\nimport { useWizard } from '@/hooks/use-wizard';\nimport { WizardProgressBar } from './ProgressBar';\nimport { Button } from '@/components/ui/button';\nimport { ArrowLeft, ArrowRight, Check, Loader2 } from 'lucide-react';\n\nexport default function SetupWizard() {\n  const {\n    steps,\n    activeStep,\n    isFirstStep,\n    isLastStep,\n    goToNextStep,\n    goToPreviousStep,\n    isProcessing,\n  } = useWizard();\n\n  const ActiveStepComponent = steps[activeStep]?.component;\n\n  return (\n    <div className=\"flex h-full w-full flex-col\">\n      <div className=\"p-8 border-b\">\n        <WizardProgressBar />\n      </div>\n\n      <div className=\"flex-1 p-8 overflow-y-auto\">\n        {ActiveStepComponent && <ActiveStepComponent />}\n      </div>\n\n      <div className=\"p-4 border-t bg-background/80 backdrop-blur-sm mt-auto\">\n        <div className=\"flex justify-between items-center max-w-4xl mx-auto\">\n          <div>\n            {!isFirstStep && (\n              <Button variant=\"outline\" onClick={goToPreviousStep} disabled={isProcessing}>\n                <ArrowLeft className=\"mr-2 h-4 w-4\" /> Previous\n              </Button>\n            )}\n          </div>\n          <div>\n            <Button onClick={goToNextStep} disabled={isProcessing}>\n                {isProcessing ? (\n                    <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                ) : isLastStep ? (\n                    <Check className=\"mr-2 h-4 w-4\" />\n                ) : (\n                    <ArrowRight className=\"mr-2 h-4 w-4\" />\n                )}\n                {isProcessing ? 'Processing...' : isLastStep ? 'Finish Setup' : 'Next'}\n            </Button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AALA;;;;;;AAOe,SAAS;IACtB,MAAM,EACJ,KAAK,EACL,UAAU,EACV,WAAW,EACX,UAAU,EACV,YAAY,EACZ,gBAAgB,EAChB,YAAY,EACb,GAAG,CAAA,GAAA,8HAAA,CAAA,YAAS,AAAD;IAEZ,MAAM,sBAAsB,KAAK,CAAC,WAAW,EAAE;IAE/C,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,6JAAA,CAAA,oBAAiB;;;;;;;;;;0BAGpB,8OAAC;gBAAI,WAAU;0BACZ,qCAAuB,8OAAC;;;;;;;;;;0BAG3B,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;sCACE,CAAC,6BACA,8OAAC,kIAAA,CAAA,SAAM;gCAAC,SAAQ;gCAAU,SAAS;gCAAkB,UAAU;;kDAC7D,8OAAC,gNAAA,CAAA,YAAS;wCAAC,WAAU;;;;;;oCAAiB;;;;;;;;;;;;sCAI5C,8OAAC;sCACC,cAAA,8OAAC,kIAAA,CAAA,SAAM;gCAAC,SAAS;gCAAc,UAAU;;oCACpC,6BACG,8OAAC,iNAAA,CAAA,UAAO;wCAAC,WAAU;;;;;+CACnB,2BACA,8OAAC,oMAAA,CAAA,QAAK;wCAAC,WAAU;;;;;6DAEjB,8OAAC,kNAAA,CAAA,aAAU;wCAAC,WAAU;;;;;;oCAEzB,eAAe,kBAAkB,aAAa,iBAAiB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOhF","debugId":null}},
    {"offset": {"line": 1138, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/admin/setup-wizard/WizardStepWelcome.tsx"],"sourcesContent":["'use client';\n\nimport { Church, Rocket } from 'lucide-react';\n\nexport default function WizardStepWelcome() {\n  return (\n    <div className=\"max-w-2xl mx-auto text-center\">\n        <Rocket className=\"mx-auto h-16 w-16 text-primary mb-6\" />\n      <h2 className=\"text-2xl font-bold font-headline tracking-tight\">\n        Welcome to Weaver's Loom!\n      </h2>\n      <p className=\"mt-2 text-muted-foreground\">\n        Let's get your church set up for volunteer scheduling. This quick wizard will guide you through the initial steps.\n      </p>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AAFA;;;AAIe,SAAS;IACtB,qBACE,8OAAC;QAAI,WAAU;;0BACX,8OAAC,sMAAA,CAAA,SAAM;gBAAC,WAAU;;;;;;0BACpB,8OAAC;gBAAG,WAAU;0BAAkD;;;;;;0BAGhE,8OAAC;gBAAE,WAAU;0BAA6B;;;;;;;;;;;;AAKhD","debugId":null}},
    {"offset": {"line": 1186, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/admin/setup-wizard/WizardStepUpload.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { useWizard } from '@/hooks/use-wizard';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Loader2, UploadCloud, FileText } from 'lucide-react';\n\ninterface WizardStepUploadProps {\n  onFileUpload: (file: File) => Promise<any>;\n  onSkip: () => void;\n}\n\nexport default function WizardStepUpload({ onFileUpload, onSkip }: WizardStepUploadProps) {\n  const { setIsProcessing, goToNextStep } = useWizard();\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n\n  const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    if (event.target.files && event.target.files[0]) {\n      setSelectedFile(event.target.files[0]);\n    }\n  };\n\n  const handleUpload = async () => {\n    if (!selectedFile) return;\n    setIsProcessing(true);\n    try {\n      await onFileUpload(selectedFile);\n      // The parent component handles setting the wizard data and moving to the next step.\n      // But we will manually trigger next step here.\n      goToNextStep();\n    } catch (error) {\n      // Error is handled by parent, but we need to stop processing indicator\n      setIsProcessing(false);\n    }\n  };\n  \n  const handleSkip = () => {\n    onSkip();\n    goToNextStep();\n  }\n\n  return (\n    <div className=\"max-w-2xl mx-auto text-center\">\n      <UploadCloud className=\"mx-auto h-16 w-16 text-primary mb-6\" />\n      <h2 className=\"text-2xl font-bold font-headline tracking-tight\">Upload Your Current Schedule</h2>\n      <p className=\"mt-2 text-muted-foreground mb-8\">\n        Give us a head start! Upload your current volunteer schedule as a PDF, Word, or Excel file.\n        Our AI will automatically extract volunteers, roles, and services to pre-fill your setup.\n      </p>\n\n      <div className=\"mx-auto max-w-sm space-y-4\">\n        <Input \n            id=\"schedule-file\" \n            type=\"file\" \n            onChange={handleFileChange}\n            accept=\".pdf,.doc,.docx,.xls,.xlsx\"\n        />\n\n        {selectedFile && (\n            <div className=\"text-sm text-muted-foreground flex items-center justify-center gap-2\">\n                <FileText className=\"h-4 w-4\" />\n                <span>{selectedFile.name}</span>\n            </div>\n        )}\n\n        <Button onClick={handleUpload} disabled={!selectedFile} className=\"w-full\">\n            Upload & Analyze\n        </Button>\n        \n        <p className=\"text-xs text-muted-foreground\">or</p>\n        \n        <Button variant=\"link\" onClick={handleSkip}>\n          Skip and set up manually\n        </Button>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AAAA;AANA;;;;;;;AAae,SAAS,iBAAiB,EAAE,YAAY,EAAE,MAAM,EAAyB;IACtF,MAAM,EAAE,eAAe,EAAE,YAAY,EAAE,GAAG,CAAA,GAAA,8HAAA,CAAA,YAAS,AAAD;IAClD,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe;IAE9D,MAAM,mBAAmB,CAAC;QACxB,IAAI,MAAM,MAAM,CAAC,KAAK,IAAI,MAAM,MAAM,CAAC,KAAK,CAAC,EAAE,EAAE;YAC/C,gBAAgB,MAAM,MAAM,CAAC,KAAK,CAAC,EAAE;QACvC;IACF;IAEA,MAAM,eAAe;QACnB,IAAI,CAAC,cAAc;QACnB,gBAAgB;QAChB,IAAI;YACF,MAAM,aAAa;YACnB,oFAAoF;YACpF,+CAA+C;YAC/C;QACF,EAAE,OAAO,OAAO;YACd,uEAAuE;YACvE,gBAAgB;QAClB;IACF;IAEA,MAAM,aAAa;QACjB;QACA;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,oNAAA,CAAA,cAAW;gBAAC,WAAU;;;;;;0BACvB,8OAAC;gBAAG,WAAU;0BAAkD;;;;;;0BAChE,8OAAC;gBAAE,WAAU;0BAAkC;;;;;;0BAK/C,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,iIAAA,CAAA,QAAK;wBACF,IAAG;wBACH,MAAK;wBACL,UAAU;wBACV,QAAO;;;;;;oBAGV,8BACG,8OAAC;wBAAI,WAAU;;0CACX,8OAAC,8MAAA,CAAA,WAAQ;gCAAC,WAAU;;;;;;0CACpB,8OAAC;0CAAM,aAAa,IAAI;;;;;;;;;;;;kCAIhC,8OAAC,kIAAA,CAAA,SAAM;wBAAC,SAAS;wBAAc,UAAU,CAAC;wBAAc,WAAU;kCAAS;;;;;;kCAI3E,8OAAC;wBAAE,WAAU;kCAAgC;;;;;;kCAE7C,8OAAC,kIAAA,CAAA,SAAM;wBAAC,SAAQ;wBAAO,SAAS;kCAAY;;;;;;;;;;;;;;;;;;AAMpD","debugId":null}},
    {"offset": {"line": 1336, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <p\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG1B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 1417, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/scroll-area.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC,0KAAA,CAAA,OAAwB;QACvB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,4BAA4B;QACzC,GAAG,KAAK;;0BAET,8OAAC,0KAAA,CAAA,WAA4B;gBAAC,WAAU;0BACrC;;;;;;0BAEH,8OAAC;;;;;0BACD,8OAAC,0KAAA,CAAA,SAA0B;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,0KAAA,CAAA,OAAwB,CAAC,WAAW;AAE7D,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,cAAc,UAAU,EAAE,GAAG,OAAO,EAAE,oBACpD,8OAAC,0KAAA,CAAA,sBAAuC;QACtC,KAAK;QACL,aAAa;QACb,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,iDACA,gBAAgB,cACd,sDACF,gBAAgB,gBACd,wDACF;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,0KAAA,CAAA,kBAAmC;YAAC,WAAU;;;;;;;;;;;AAGnD,UAAU,WAAW,GAAG,0KAAA,CAAA,sBAAuC,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 1485, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/admin/setup-wizard/WizardStepReview.tsx"],"sourcesContent":["'use client';\n\nimport type { ExtractedScheduleData } from '@/ai/flows/extract-schedule-data-flow';\nimport { Card, CardHeader, CardTitle, CardDescription, CardContent } from '@/components/ui/card';\nimport { ScrollArea } from '@/components/ui/scroll-area';\nimport { Users, BookCopy, Briefcase, Calendar } from 'lucide-react';\n\ninterface WizardStepReviewProps {\n  extractedData: ExtractedScheduleData | null;\n}\n\nexport default function WizardStepReview({ extractedData }: WizardStepReviewProps) {\n  if (!extractedData) {\n    return (\n      <div className=\"max-w-2xl mx-auto text-center\">\n        <h2 className=\"text-2xl font-bold font-headline tracking-tight\">Review Your Data</h2>\n        <p className=\"mt-2 text-muted-foreground\">\n          You chose to skip the upload. We'll proceed with a blank slate. Click \"Next\" to continue.\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-4xl mx-auto\">\n      <div className=\"text-center mb-8\">\n        <h2 className=\"text-2xl font-bold font-headline tracking-tight\">Review Your Data</h2>\n        <p className=\"mt-2 text-muted-foreground\">\n          Our AI has extracted the following information from your document. Please review it before we import it.\n        </p>\n      </div>\n      <div className=\"grid gap-6 md:grid-cols-2\">\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\"><Users className=\"h-5 w-5 text-primary\" /> Volunteers</CardTitle>\n            <CardDescription>{extractedData.volunteers.length} unique volunteers found.</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <ScrollArea className=\"h-48\">\n              <ul className=\"space-y-2\">\n                {extractedData.volunteers.map((v, i) => (\n                  <li key={i} className=\"text-sm p-2 bg-muted/50 rounded-md\">{v.name}</li>\n                ))}\n              </ul>\n            </ScrollArea>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\"><Briefcase className=\"h-5 w-5 text-primary\" /> Roles</CardTitle>\n            <CardDescription>{extractedData.roles.length} unique roles found.</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <ScrollArea className=\"h-48\">\n              <ul className=\"space-y-2\">\n                {extractedData.roles.map((r, i) => (\n                  <li key={i} className=\"text-sm p-2 bg-muted/50 rounded-md\">{r.name}</li>\n                ))}\n              </ul>\n            </ScrollArea>\n          </CardContent>\n        </Card>\n        <Card className=\"md:col-span-2\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\"><BookCopy className=\"h-5 w-5 text-primary\" /> Suggested Templates</CardTitle>\n            <CardDescription>{extractedData.templates.length} service templates suggested.</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <ScrollArea className=\"h-48\">\n              <div className=\"space-y-4\">\n                {extractedData.templates.map((t, i) => (\n                  <div key={i} className=\"text-sm p-3 border rounded-md\">\n                    <p className=\"font-semibold\">{t.name}</p>\n                    <p className=\"text-xs text-muted-foreground\">Roles: {t.roles.join(', ')}</p>\n                  </div>\n                ))}\n              </div>\n            </ScrollArea>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAGA;AACA;AACA;AAAA;AAAA;AALA;;;;;AAWe,SAAS,iBAAiB,EAAE,aAAa,EAAyB;IAC/E,IAAI,CAAC,eAAe;QAClB,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAG,WAAU;8BAAkD;;;;;;8BAChE,8OAAC;oBAAE,WAAU;8BAA6B;;;;;;;;;;;;IAKhD;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAkD;;;;;;kCAChE,8OAAC;wBAAE,WAAU;kCAA6B;;;;;;;;;;;;0BAI5C,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,gIAAA,CAAA,OAAI;;0CACH,8OAAC,gIAAA,CAAA,aAAU;;kDACT,8OAAC,gIAAA,CAAA,YAAS;wCAAC,WAAU;;0DAA0B,8OAAC,oMAAA,CAAA,QAAK;gDAAC,WAAU;;;;;;4CAAyB;;;;;;;kDACzF,8OAAC,gIAAA,CAAA,kBAAe;;4CAAE,cAAc,UAAU,CAAC,MAAM;4CAAC;;;;;;;;;;;;;0CAEpD,8OAAC,gIAAA,CAAA,cAAW;0CACV,cAAA,8OAAC,0IAAA,CAAA,aAAU;oCAAC,WAAU;8CACpB,cAAA,8OAAC;wCAAG,WAAU;kDACX,cAAc,UAAU,CAAC,GAAG,CAAC,CAAC,GAAG,kBAChC,8OAAC;gDAAW,WAAU;0DAAsC,EAAE,IAAI;+CAAzD;;;;;;;;;;;;;;;;;;;;;;;;;;kCAMnB,8OAAC,gIAAA,CAAA,OAAI;;0CACH,8OAAC,gIAAA,CAAA,aAAU;;kDACT,8OAAC,gIAAA,CAAA,YAAS;wCAAC,WAAU;;0DAA0B,8OAAC,4MAAA,CAAA,YAAS;gDAAC,WAAU;;;;;;4CAAyB;;;;;;;kDAC7F,8OAAC,gIAAA,CAAA,kBAAe;;4CAAE,cAAc,KAAK,CAAC,MAAM;4CAAC;;;;;;;;;;;;;0CAE/C,8OAAC,gIAAA,CAAA,cAAW;0CACV,cAAA,8OAAC,0IAAA,CAAA,aAAU;oCAAC,WAAU;8CACpB,cAAA,8OAAC;wCAAG,WAAU;kDACX,cAAc,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,kBAC3B,8OAAC;gDAAW,WAAU;0DAAsC,EAAE,IAAI;+CAAzD;;;;;;;;;;;;;;;;;;;;;;;;;;kCAMnB,8OAAC,gIAAA,CAAA,OAAI;wBAAC,WAAU;;0CACd,8OAAC,gIAAA,CAAA,aAAU;;kDACT,8OAAC,gIAAA,CAAA,YAAS;wCAAC,WAAU;;0DAA0B,8OAAC,8MAAA,CAAA,WAAQ;gDAAC,WAAU;;;;;;4CAAyB;;;;;;;kDAC5F,8OAAC,gIAAA,CAAA,kBAAe;;4CAAE,cAAc,SAAS,CAAC,MAAM;4CAAC;;;;;;;;;;;;;0CAEnD,8OAAC,gIAAA,CAAA,cAAW;0CACV,cAAA,8OAAC,0IAAA,CAAA,aAAU;oCAAC,WAAU;8CACpB,cAAA,8OAAC;wCAAI,WAAU;kDACZ,cAAc,SAAS,CAAC,GAAG,CAAC,CAAC,GAAG,kBAC/B,8OAAC;gDAAY,WAAU;;kEACrB,8OAAC;wDAAE,WAAU;kEAAiB,EAAE,IAAI;;;;;;kEACpC,8OAAC;wDAAE,WAAU;;4DAAgC;4DAAQ,EAAE,KAAK,CAAC,IAAI,CAAC;;;;;;;;+CAF1D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAY5B","debugId":null}},
    {"offset": {"line": 1811, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/admin/setup-wizard/WizardStepFinish.tsx"],"sourcesContent":["'use client';\n\nimport { PartyPopper } from \"lucide-react\";\n\nexport default function WizardStepFinish() {\n  return (\n    <div className=\"max-w-xl mx-auto text-center\">\n      <PartyPopper className=\"mx-auto h-16 w-16 text-primary mb-6\" />\n      <h2 className=\"text-2xl font-bold font-headline tracking-tight\">You're All Set!</h2>\n      <p className=\"mt-2 text-muted-foreground\">\n        We've imported your data. Click \"Finish Setup\" to be taken to your admin dashboard.\n      </p>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AAFA;;;AAIe,SAAS;IACtB,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,oNAAA,CAAA,cAAW;gBAAC,WAAU;;;;;;0BACvB,8OAAC;gBAAG,WAAU;0BAAkD;;;;;;0BAChE,8OAAC;gBAAE,WAAU;0BAA6B;;;;;;;;;;;;AAKhD","debugId":null}},
    {"offset": {"line": 1859, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/admin/setup-wizard/page.tsx"],"sourcesContent":["'use client';\n\nimport { useAuth } from '@/hooks/use-auth';\nimport { useRouter } from 'next/navigation';\nimport { useEffect, useState } from 'react';\nimport { useMockDatabase } from '@/lib/data';\nimport { WizardProvider } from '@/hooks/use-wizard';\nimport { extractScheduleData, ExtractedScheduleDataSchema } from '@/ai/flows/extract-schedule-data-flow';\nimport SetupWizard from '@/components/admin/setup-wizard/SetupWizard';\nimport WizardStepWelcome from '@/components/admin/setup-wizard/WizardStepWelcome';\nimport WizardStepUpload from '@/components/admin/setup-wizard/WizardStepUpload';\nimport WizardStepReview from '@/components/admin/setup-wizard/WizardStepReview';\nimport WizardStepFinish from '@/components/admin/setup-wizard/WizardStepFinish';\nimport { useToast } from '@/hooks/use-toast';\nimport type { ExtractedScheduleData } from '@/ai/flows/extract-schedule-data-flow';\n\nexport default function SetupWizardPage() {\n  const { isLoggedIn, isAdmin } = useAuth();\n  const router = useRouter();\n  const db = useMockDatabase();\n  const { toast } = useToast();\n\n  const [wizardData, setWizardData] = useState<ExtractedScheduleData | null>(null);\n\n  useEffect(() => {\n    if (!isLoggedIn) {\n      router.push('/');\n    } else if (!isAdmin) {\n      router.push('/my-schedule');\n    }\n  }, [isLoggedIn, isAdmin, router]);\n\n  const handleFileUpload = async (file: File): Promise<ExtractedScheduleData | null> => {\n    const reader = new FileReader();\n    return new Promise((resolve, reject) => {\n      reader.onerror = () => {\n        reader.abort();\n        reject(new DOMException(\"Problem parsing input file.\"));\n      };\n\n      reader.onload = async () => {\n        const dataUri = reader.result as string;\n        try {\n          const result = await extractScheduleData({ documentDataUri: dataUri });\n          const validatedData = ExtractedScheduleDataSchema.parse(result);\n          setWizardData(validatedData);\n          resolve(validatedData);\n        } catch (err) {\n          console.error(err);\n          toast({\n            variant: \"destructive\",\n            title: \"Data Extraction Failed\",\n            description: \"The AI could not process your document. Please check the file and try again.\",\n          });\n          reject(err);\n        }\n      };\n\n      reader.readAsDataURL(file);\n    });\n  };\n  \n  const handleSkip = () => {\n    setWizardData({\n      volunteers: [],\n      roles: [],\n      events: [],\n      templates: [],\n    });\n  };\n\n  const handleFinish = async () => {\n    if (!wizardData) return;\n\n    try {\n        // In a real app, you would have a single transactional write.\n        // For the mock DB, we can do them sequentially.\n        for (const role of wizardData.roles) {\n            await db.addUniversalRole(role.name, role.description);\n        }\n        for (const template of wizardData.templates) {\n             const templateRoles = template.roles.map(roleName => {\n                // This is brittle, relies on mock data having the role already\n                const uRole = db.universalRoles.find(ur => ur.name === roleName);\n                return {\n                    instanceId: `tr_${Date.now()}_${Math.random()}`,\n                    roleId: uRole?.id || '',\n                    name: roleName\n                }\n            })\n            await db.createServiceTemplate(template.name, templateRoles);\n        }\n        // NOTE: We are not adding volunteers or events in this step to keep it simple.\n        // A real implementation would add volunteers and create the scheduled events.\n\n        localStorage.setItem('setupCompleted', 'true');\n        toast({\n            title: \"Setup Complete!\",\n            description: \"Your church is ready to go.\",\n        });\n        router.push('/admin');\n\n    } catch (error) {\n        toast({\n            variant: \"destructive\",\n            title: \"Save Failed\",\n            description: \"There was an error saving your setup data. Please try again.\",\n        })\n    }\n  };\n\n  if (!isLoggedIn || !isAdmin) {\n    return null; // or a loading spinner\n  }\n\n  const steps = [\n    { id: 'Step 1', name: 'Welcome', component: WizardStepWelcome },\n    { \n      id: 'Step 2', \n      name: 'Upload Schedule', \n      component: () => <WizardStepUpload onFileUpload={handleFileUpload} onSkip={handleSkip} /> \n    },\n    { \n      id: 'Step 3', \n      name: 'Review & Confirm', \n      component: () => <WizardStepReview extractedData={wizardData} />\n    },\n    { \n        id: 'Step 4', \n        name: 'Finish', \n        component: WizardStepFinish,\n        onNext: handleFinish\n    },\n  ];\n\n  return (\n    <div className=\"h-screen w-screen bg-muted flex flex-col\">\n       <div className=\"p-4 border-b shrink-0\">\n           <h1 className=\"text-2xl font-bold font-headline\">Weaver's Loom Setup</h1>\n       </div>\n       <div className=\"flex-1 overflow-hidden\">\n        <WizardProvider steps={steps}>\n            <SetupWizard />\n        </WizardProvider>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}